(this.webpackJsonprchat=this.webpackJsonprchat||[]).push([[0],{102:function(e,t,a){e.exports=a(123)},107:function(e,t,a){},123:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(11),i=a.n(r),l=(a(107),a(67)),c=a(10),s=a(53),u=a(54),m=a(63),d=a(62),h=a(175),f=a(172),p=a(161),E=["Enter the jungle","Join the party","Join the randomness","Join the chat","Enter Dexter's Laboratory"],b=["John Doe","Jane Doe","Dexter (the scientist)"],g=["Who are you ?","Identify yourself","Name must you enter"],v=["A website where you chat with randoms","A website where a lot of things are random","A website where you can write a bunch of nonsense"];function w(e,t){return Math.floor(Math.random()*(t-e+1))+e}var y={mainDiv:{display:"flex",alignItems:"center",flexDirection:"column"},title:{fontFamily:"Roboto Mono",fontSize:50,fontWeight:900,textAlign:"center",paddingBottom:0},funnySentance:{fontFamily:"Roboto Mono",fontSize:30,fontWeight:900,textAlign:"center",paddingBottom:50}},S=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).defaultName=b[w(0,b.length-1)],e.state={description:v[w(0,v.length-1)],defaultName:e.defaultName,identify:g[w(0,g.length-1)],joinButton:E[w(0,E.length-1)],name:e.defaultName,redirect:!1},e}return Object(u.a)(a,[{key:"setRedirect",value:function(e){this.setState({redirect:e})}},{key:"setName",value:function(e){this.setState({name:e})}},{key:"checkValidity",value:function(){""!==this.state.name&&null!==this.state.name?(this.setRedirect(!0),window.localStorage.setItem("username",this.state.name),window.localStorage.setItem("uuid",Object(h.a)())):alert("Invalid name :(")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:y.mainDiv},o.a.createElement("h1",{style:y.title},"Rchat"),o.a.createElement("h3",{style:y.funnySentance},this.state.description),o.a.createElement(f.a,{id:"test",variant:"outlined",defaultValue:this.state.defaultName,label:this.state.identify,required:!0,onChange:function(t){return e.setName(t.target.value)}}),o.a.createElement("div",{style:{paddingTop:20}}),o.a.createElement(p.a,{color:"primary",variant:"contained",onClick:function(){return e.checkValidity()}},this.state.joinButton),this.state.redirect&&o.a.createElement(c.a,{push:!0,to:"/choose"}))}}]),a}(o.a.Component),j=a(13),O=a(47),C=a.n(O),k=C.a.initializeApp({apiKey:"AIzaSyAAJQ6cSdyEOg6Jmtu0kLte2wn4VqsTCrM",authDomain:"rchat-87159.firebaseapp.com",databaseURL:"https://rchat-87159.firebaseio.com",projectId:"rchat-87159",storageBucket:"rchat-87159.appspot.com",messagingSenderId:"298820429100",appId:"1:298820429100:web:79e2ff175c526737423889",measurementId:"G-6DK77K31E2"});C.a.analytics();var D=k.firestore(),x=a(176),I=a(163),B=a(162),T=a(85),R=a.n(T),A=a(84),W=a.n(A),J=a(86),N=a.n(J);var M=function(e){var t=Object(n.useState)(!1),a=Object(j.a)(t,2),r=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(j.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(!1),h=Object(j.a)(d,2),f=h[0],p=h[1],E={mainDiv:{display:"flex",justifyContent:"space-around",flexDirection:"row"},title:{fontFamily:"Roboto Mono",fontSize:50,fontWeight:900,textAlign:"center",paddingBottom:0},icon:{fontSize:50,color:"black"}};function b(e){return"profile"===e?o.a.createElement(B.a,{onClick:function(){return m(!0)}},o.a.createElement(W.a,{style:E.icon})):"help"===e?o.a.createElement(B.a,{onClick:function(){return i(!0)}},o.a.createElement(R.a,{style:E.icon})):"rooms"===e?o.a.createElement(B.a,{onClick:function(){return p(!0)}},o.a.createElement(N.a,{style:E.icon})):void 0}return o.a.createElement("div",{style:E.mainDiv},("help"===e.left||"help"===e.right)&&o.a.createElement(x.a,{open:r,onClose:function(){return i(!1)}},o.a.createElement(I.a,null,"What's Rchat ?"),o.a.createElement("h3",null,"If you need help that much call 911")),b(e.left),o.a.createElement("h1",{style:E.title},"Rchat"),b(e.right),u&&o.a.createElement(c.a,{push:!0,to:"/me"}),f&&o.a.createElement(c.a,{push:!0,to:"/choose"}))},z=a(164),F=a(160),U=a(165),L=a(167),P=a(166),V=a(170),H=a(87),K=a.n(H),q=a(168),G=a(169),Y=a(177),Q=a(173),$=a(178),X=Object(z.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(4)}}})),Z={mainDiv:{display:"flex",alignItems:"center",flexDirection:"column"},title:{fontFamily:"Roboto Mono",fontSize:50,fontWeight:900,textAlign:"center",paddingBottom:0},roomList:{maxWidth:"50%",overflow:"auto",maxHeight:500}};function _(){var e=Object(n.useState)(!1),t=Object(j.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)("Change my opinion: Joseph Joestar is the best jojo"),l=Object(j.a)(i,2),c=l[0],s=l[1],u=Object(n.useState)(!1),m=Object(j.a)(u,2),d=m[0],h=m[1],E=Object(n.useState)(""),b=Object(j.a)(E,2),g=b[0],v=b[1];return o.a.createElement("div",null,o.a.createElement(x.a,{open:a,onClose:function(){return r(!1)},"aria-labelledby":"room-dialog","aria-describedby":"create-room"},o.a.createElement(I.a,{id:"hmm-create-room"},"Create a new room"),o.a.createElement(q.a,null,o.a.createElement(f.a,{id:"room-name",variant:"outlined",label:"Room name",defaultValue:c,style:{width:500},onChange:function(e){return s(e.currentTarget.value)}}),o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement($.a,{name:"hasPassword",checked:d,onChange:function(){return h(!d)}}),o.a.createElement("h3",null,"Password")),d&&o.a.createElement(f.a,{id:"room-password",variant:"outlined",label:"Password",style:{width:500},onChange:function(e){return v(e.currentTarget.value)}})),o.a.createElement(G.a,null,o.a.createElement(p.a,{color:"primary",onClick:function(){return function(){var e=D.collection("rooms").doc();e.set({name:c,locked:d,password:g,creator:[window.localStorage.getItem("uuid"),window.localStorage.getItem("username")]}).then((function(){r(!1)})).catch((function(e){alert("error man"),console.error(e)})),e.collection("messages").doc().set({message:"Welcome to the room :)",sender:"room",date:C.a.firestore.Timestamp.fromDate(new Date)}),e.collection("members").doc().set({member:[window.localStorage.getItem("uuid"),window.localStorage.getItem("username")]}).then((function(){})).catch((function(e){alert("error man"),console.error(e)}))}()}},"Create"))),o.a.createElement(p.a,{color:"primary",variant:"contained",onClick:function(){return r(!0)}},"Create new room"))}var ee=function(){var e=X(),t=Object(n.useState)([]),a=Object(j.a)(t,2),r=a[0],i=a[1],l=Object(n.useState)(""),s=Object(j.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(!1),h=Object(j.a)(d,2),E=h[0],b=h[1],g=Object(n.useState)(!1),v=Object(j.a)(g,2),w=v[0],y=v[1],S=Object(n.useState)(""),O=Object(j.a)(S,2),C=O[0],k=O[1],B=Object(n.useState)(),T=Object(j.a)(B,2),R=T[0],A=T[1];return Object(n.useEffect)((function(){D.collection("rooms").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push([e.id,e.data()]),console.log(e),D.collection("rooms").doc(e.id).collection("messages").onSnapshot((function(e){e.forEach((function(e){console.log("=>",e.id,e.data())}))}))})),i(t)}))}),[]),o.a.createElement("div",null,o.a.createElement(M,{left:"help",right:"profile"}),o.a.createElement(Y.a,{open:w,onClose:function(){return y(!1)},autoHideDuration:3e3},o.a.createElement(Q.a,{onClose:function(){return y(!1)},severity:"error"},"Bad password")),o.a.createElement(x.a,{open:E,onClose:function(){return b(!1)},"aria-labelledby":"password-dialog","aria-describedby":"enter-room-password"},o.a.createElement(I.a,{id:"password-title"},"This room is locked enter the password to continue"),o.a.createElement(q.a,null,o.a.createElement(f.a,{id:"password",variant:"outlined",label:"Password",style:{width:500},type:"password",onChange:function(e){return k(e.currentTarget.value)}})),o.a.createElement(G.a,null,o.a.createElement(p.a,{color:"primary",onClick:function(){C===R[1].password?m(R[0]):y(!0)}},"Enter"))),o.a.createElement("div",{style:Z.mainDiv},o.a.createElement(_,null),o.a.createElement(F.a,{style:Z.roomList,component:"nav","aria-label":"rooms",className:e.root,subheader:o.a.createElement(V.a,{component:"div",id:"rooms-subheader"},"Rooms")},function(e,t,a,n){return e.map((function(e){return o.a.createElement(U.a,{button:!0,onClick:function(){return function(e,t,a,n){e[1].locked?(n(e),a(!0)):t(e[0])}(e,t,a,n)}},o.a.createElement(P.a,{primary:e[1].name}),o.a.createElement(L.a,null,e[1].locked&&o.a.createElement(K.a,null)))}))}(r,m,b,A)),""!==u&&o.a.createElement(c.a,{push:!0,to:"/"+u})))},te={textFieldDiv:{display:"flex",alignItems:"center",flexDirection:"column"}},ae=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={username:window.localStorage.getItem("username"),uuid:window.localStorage.getItem("uuid"),showSucess:!1,showError:!1},e}return Object(u.a)(a,[{key:"resetUuid",value:function(){var e=Object(h.a)();this.setState({uuid:e}),window.localStorage.setItem("uuid",e)}},{key:"setUsername",value:function(e){this.setState({username:e})}},{key:"saveUsername",value:function(){""!==this.state.username?(window.localStorage.setItem("username",this.state.username),this.setState({showSucess:!0})):this.setState({showError:!0})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(M,{left:"help",right:"rooms"}),o.a.createElement("div",{style:{paddingTop:150}}),o.a.createElement("div",null,o.a.createElement(Y.a,{open:this.state.showSucess,onClose:function(){return e.setState({showSucess:!1})},autoHideDuration:3e3},o.a.createElement(Q.a,{onClose:function(){return e.setState({showSucess:!1})},severity:"success"},"Username saved")),o.a.createElement(Y.a,{open:this.state.showError,onClose:function(){return e.setState({showError:!1})},autoHideDuration:3e3},o.a.createElement(Q.a,{onClose:function(){return e.setState({showError:!1})},severity:"error"},"Bad username not saved")),o.a.createElement("div",{style:te.textFieldDiv},o.a.createElement(f.a,{id:"username",variant:"outlined",defaultValue:this.state.username,label:"Your current username",style:{width:500},onChange:function(t){return e.setUsername(t.currentTarget.value)},required:!0}),o.a.createElement("div",{style:{paddingTop:15}}),o.a.createElement(p.a,{color:"primary",variant:"contained",onClick:function(){return e.saveUsername()}},"Save"),o.a.createElement("div",{style:{paddingTop:30}}),o.a.createElement(f.a,{id:"uuid",variant:"outlined",value:this.state.uuid,label:"Your uuid",style:{width:500},InputProps:{readOnly:!0}}),o.a.createElement("div",{style:{paddingTop:15}}),o.a.createElement(p.a,{color:"primary",variant:"contained",onClick:function(){return e.resetUuid()}},"Generate new one"))))}}]),a}(o.a.Component),ne=a(171),oe={mainDiv:{display:"flex",justifyContent:"space-around",flexDirection:"row"},roomName:{fontFamily:"Roboto Mono",fontSize:30,fontWeight:900,textAlign:"center",paddingBottom:0}};var re=function(){var e=Object(c.g)().room,t=Object(n.useState)(),a=Object(j.a)(t,2),r=a[0],i=a[1],l=Object(n.useState)(!1),s=Object(j.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(!1),h=Object(j.a)(d,2),E=h[0],b=h[1],g=Object(n.useState)(!0),v=Object(j.a)(g,2),w=v[0],y=v[1],S=Object(n.useState)(""),O=Object(j.a)(S,2),C=O[0],k=O[1],B=Object(n.useState)(!1),T=Object(j.a)(B,2),R=T[0],A=T[1];return Object(n.useEffect)((function(){D.collection("rooms").doc(e).onSnapshot((function(t){i(t),!u&&t.data().locked&&function(){var t=window.localStorage.getItem("uuid"),a=!1;D.collection("rooms").doc(e).collection("members").get().then((function(e){e.forEach((function(e){e.data().member[0]===t&&(a=!0,console.log("Found my boiii !!!"))})),b(!0),m(a),y(!a)}))}()}))}),[u]),o.a.createElement("div",null,o.a.createElement(M,{left:"rooms",right:"profile"}),o.a.createElement("div",null,o.a.createElement(x.a,{open:w,onClose:function(){return y(!1)},"aria-labelledby":"room-verification","aria-describedby":"check-identity",disableBackdropClick:!0,disableEscapeKeyDown:!0},!0===E&&!1===u&&o.a.createElement(I.a,{id:"password-title"},"This room is locked enter the password to continue"),o.a.createElement(q.a,null,!1===E&&o.a.createElement(ne.a,null),!0===E&&!1===u&&o.a.createElement(f.a,{id:"password",variant:"outlined",label:"Password",style:{width:500},type:"password",onChange:function(e){return k(e.currentTarget.value)}})),o.a.createElement(G.a,null,!0===E&&!1===u&&o.a.createElement(p.a,{color:"primary",onClick:function(){C===r.data().password?(b(!0),m(!0),D.collection("rooms").doc(r.id).collection("members").doc().set({member:[window.localStorage.getItem("uuid"),window.localStorage.getItem("username")]}),y(!1)):A(!0)}},"Enter"))),o.a.createElement(Y.a,{open:R,onClose:function(){return A(!1)},autoHideDuration:3e3},o.a.createElement(Q.a,{onClose:function(){return A(!1)},severity:"error"},"Bad password")),r&&o.a.createElement("h3",{style:oe.roomName},r.data().name)))};var ie=function(){return o.a.createElement("div",null,o.a.createElement(l.a,null,o.a.createElement(c.d,null,o.a.createElement(c.b,{exact:!0,path:"/rchat"},o.a.createElement(S,null)),o.a.createElement(c.b,{path:"/choose"},o.a.createElement(ee,null)),o.a.createElement(c.b,{path:"/me"},o.a.createElement(ae,null)),o.a.createElement(c.b,{path:"/:room",children:o.a.createElement(re,null)}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[102,1,2]]]);
//# sourceMappingURL=main.cdfb85c8.chunk.js.map