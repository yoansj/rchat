(this.webpackJsonprchat=this.webpackJsonprchat||[]).push([[0],{107:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(11),i=a.n(r),l=(a(91),a(59)),s=a(10),c=a(48),u=a(49),m=a(57),d=a(56),h=a(151),f=a(148),g=a(145),v=["Enter the jungle","Join the party","Join the randomness","Join the chat","Enter Dexter's Laboratory"],y=["John Doe","Jane Doe","Dexter (the scientist)"],E=["Who are you ?","Identify yourself","Name must you enter"],p=["A website where you chat with randoms","A website where a lot of things are random","A website where you can write a bunch of nonsense"];function b(e,t){return Math.floor(Math.random()*(t-e+1))+e}var w=a(40),S=a.n(w),j=S.a.initializeApp({apiKey:"AIzaSyAAJQ6cSdyEOg6Jmtu0kLte2wn4VqsTCrM",authDomain:"rchat-87159.firebaseapp.com",databaseURL:"https://rchat-87159.firebaseio.com",projectId:"rchat-87159",storageBucket:"rchat-87159.appspot.com",messagingSenderId:"298820429100",appId:"1:298820429100:web:79e2ff175c526737423889",measurementId:"G-6DK77K31E2"});S.a.analytics();var x=j.firestore(),D={mainDiv:{display:"flex",alignItems:"center",flexDirection:"column"},title:{fontFamily:"Roboto Mono",fontSize:50,fontWeight:900,textAlign:"center",paddingBottom:0},funnySentance:{fontFamily:"Roboto Mono",fontSize:30,fontWeight:900,textAlign:"center",paddingBottom:50}},O=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).defaultName=y[b(0,y.length-1)],e.state={description:p[b(0,p.length-1)],defaultName:e.defaultName,identify:E[b(0,E.length-1)],joinButton:v[b(0,v.length-1)],name:e.defaultName,redirect:!1,tag:"random",roomId:""},e}return Object(u.a)(a,[{key:"setRedirect",value:function(e){this.setState({redirect:e})}},{key:"setName",value:function(e){this.setState({name:e})}},{key:"checkValidity",value:function(){""!==this.state.name&&null!==this.state.name?(window.localStorage.setItem("username",this.state.name),window.localStorage.setItem("uuid",Object(h.a)()),x.collection("rooms").get().then(function(e){e.forEach(function(e){console.log(e.id," => ",e.data()),e.data().tag===this.state.tag&&(console.log("Room found: Going in"),this.setState({roomId:e.id}),this.setRedirect(!0))}.bind(this)),this.state.redirect}.bind(this))):alert("Invalid name :(")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{style:D.mainDiv},o.a.createElement("h1",{style:D.title},"Rchat"),o.a.createElement("h3",{style:D.funnySentance},this.state.description),o.a.createElement(f.a,{id:"id",variant:"outlined",defaultValue:this.state.defaultName,label:this.state.identify,required:!0,onChange:function(t){return e.setName(t.target.value)}}),o.a.createElement("div",{style:{paddingTop:20}}),o.a.createElement(f.a,{id:"tag",variant:"outlined",defaultValue:this.state.tag,label:"Enter a tag",required:!0,onChange:function(t){return e.setState({tag:t.target.value})}}),o.a.createElement("div",{style:{paddingTop:20}}),o.a.createElement(g.a,{color:"primary",variant:"contained",onClick:function(){return e.checkValidity()}},this.state.joinButton),this.state.redirect&&o.a.createElement(s.a,{push:!0,to:"/rooms/".concat(this.state.roomId)}))}}]),a}(o.a.Component),I=a(24),k=a(152),C=a(154),B=a(146),R=a(72),T=a.n(R),A=a(71),M=a.n(A),N=a(73),W=a.n(N);var z=function(e){var t=Object(n.useState)(!1),a=Object(I.a)(t,2),r=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(I.a)(l,2),u=c[0],m=c[1],d=Object(n.useState)(!1),h=Object(I.a)(d,2),f=h[0],g=h[1],v={mainDiv:{display:"flex",justifyContent:"space-around",flexDirection:"row"},title:{fontFamily:"Roboto Mono",fontSize:50,fontWeight:900,textAlign:"center",paddingBottom:0},icon:{fontSize:50,color:"black"}};function y(e){return"profile"===e?o.a.createElement(B.a,{onClick:function(){return m(!0)}},o.a.createElement(M.a,{style:v.icon})):"help"===e?o.a.createElement(B.a,{onClick:function(){return i(!0)}},o.a.createElement(T.a,{style:v.icon})):"rooms"===e?o.a.createElement(B.a,{onClick:function(){return g(!0)}},o.a.createElement(W.a,{style:v.icon})):void 0}return o.a.createElement("div",{style:v.mainDiv},("help"===e.left||"help"===e.right)&&o.a.createElement(k.a,{open:r,onClose:function(){return i(!1)}},o.a.createElement(C.a,null,"What's Rchat ?"),o.a.createElement("h3",null,"If you need help that much call 911")),y(e.left),o.a.createElement("h1",{style:v.title},"Rchat"),y(e.right),u&&o.a.createElement(s.a,{push:!0,to:"/me"}),f&&o.a.createElement(s.a,{push:!0,to:"/choose"}))},F=a(153),J=a(150),U={textFieldDiv:{display:"flex",alignItems:"center",flexDirection:"column"}},V=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={username:window.localStorage.getItem("username"),uuid:window.localStorage.getItem("uuid"),showSucess:!1,showError:!1},e}return Object(u.a)(a,[{key:"resetUuid",value:function(){var e=Object(h.a)();this.setState({uuid:e}),window.localStorage.setItem("uuid",e)}},{key:"setUsername",value:function(e){this.setState({username:e})}},{key:"saveUsername",value:function(){""!==this.state.username?(window.localStorage.setItem("username",this.state.username),this.setState({showSucess:!0})):this.setState({showError:!0})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(z,{left:"help",right:"rooms"}),o.a.createElement("div",{style:{paddingTop:150}}),o.a.createElement("div",null,o.a.createElement(F.a,{open:this.state.showSucess,onClose:function(){return e.setState({showSucess:!1})},autoHideDuration:3e3},o.a.createElement(J.a,{onClose:function(){return e.setState({showSucess:!1})},severity:"success"},"Username saved")),o.a.createElement(F.a,{open:this.state.showError,onClose:function(){return e.setState({showError:!1})},autoHideDuration:3e3},o.a.createElement(J.a,{onClose:function(){return e.setState({showError:!1})},severity:"error"},"Bad username not saved")),o.a.createElement("div",{style:U.textFieldDiv},o.a.createElement(f.a,{id:"username",variant:"outlined",defaultValue:this.state.username,label:"Your current username",style:{width:500},onChange:function(t){return e.setUsername(t.currentTarget.value)},required:!0}),o.a.createElement("div",{style:{paddingTop:15}}),o.a.createElement(g.a,{color:"primary",variant:"contained",onClick:function(){return e.saveUsername()}},"Save"),o.a.createElement("div",{style:{paddingTop:30}}),o.a.createElement(f.a,{id:"uuid",variant:"outlined",value:this.state.uuid,label:"Your uuid",style:{width:500},InputProps:{readOnly:!0}}),o.a.createElement("div",{style:{paddingTop:15}}),o.a.createElement(g.a,{color:"primary",variant:"contained",onClick:function(){return e.resetUuid()}},"Generate new one"))))}}]),a}(o.a.Component),q=a(144),G=a(147),L=Object(G.a)((function(e){return{root:{width:600,height:120}}})),H={mainDiv:{display:"flex",justifyContent:"center",flexDirection:"column"},roomName:{fontFamily:"Roboto Mono",fontSize:30,fontWeight:900,textAlign:"center",paddingBottom:0},messageSender:{fontFamily:"Roboto Mono",fontSize:20,fontWeight:900,textDecoration:"underline"},messageText:{fontFamily:"Roboto Mono",fontSize:15,fontWeight:900},messageDate:{fontFamily:"Roboto Mono",fontSize:20,fontWeight:900},messageBar:{position:"absolute",bottom:10,display:"flex",alignItems:"center",alignSelf:"center"},messageDisplay:{overflow:"auto",maxHeight:600,width:"70%",display:"flex",flexDirection:"column",alignItems:"flex-end"},sendButton:{height:50},messageInput:{width:500}};var K=function(){var e=L(),t=Object(s.g)().room,a=Object(n.useState)(void 0),r=Object(I.a)(a,2),i=r[0],l=r[1],c=Object(n.useState)(void 0),u=Object(I.a)(c,2),m=u[0],d=u[1],h=Object(n.useState)([]),v=Object(I.a)(h,2),y=v[0],E=v[1],p=Object(n.useState)(!1),b=Object(I.a)(p,2),w=b[0],j=b[1],D=Object(n.useState)("I, Giorno Giovanna will send a message"),O=Object(I.a)(D,2),k=O[0],C=O[1];return Object(n.useEffect)((function(){return x.collection("rooms").doc(t).get().then((function(e){e.exists?(x.collection("rooms").doc(t).onSnapshot((function(e){l(e)})),x.collection("rooms").doc(t).collection("messages").orderBy("date","asc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(e.data())})),d(t),console.log(t)}))):j(!0)})),E([window.localStorage.getItem("uuid"),window.localStorage.getItem("username")]),function(){}}),[t]),o.a.createElement("div",{style:H.mainDiv},o.a.createElement("div",null,o.a.createElement(z,{left:"rooms",right:"profile"}),w&&o.a.createElement(s.a,{push:!0,to:"/404/"}),i&&o.a.createElement("h3",{style:H.roomName},void 0!==i&&i.data().name)),o.a.createElement("div",{style:H.messageDisplay},void 0===m?o.a.createElement("div",null):m.map((function(t){return o.a.createElement(q.a,{className:e.root,variant:"outlined"},o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("h3",{style:H.messageSender},t.sender[1]+" "),o.a.createElement("h3",{style:H.messageDate},"-"),o.a.createElement("h3",{style:H.messageDate},t.date.toDate().toLocaleString())),o.a.createElement("h3",{style:H.messageText},t.content))}))),o.a.createElement("div",{style:H.messageBar},o.a.createElement(f.a,{style:H.messageInput,id:"message",variant:"outlined",defaultValue:k,label:"Enter a message to be sent",required:!0,multiline:!0,value:k,onChange:function(e){return C(e.target.value)}}),o.a.createElement(g.a,{style:H.sendButton,color:"primary",variant:"contained",onClick:function(){return e="text",a=k,void x.collection("rooms").doc(t).collection("messages").doc().set({sender:y,type:e,content:a,date:S.a.firestore.Timestamp.fromDate(new Date)}).then(C(""));var e,a}},"Send")))};var Y=function(){return o.a.createElement("div",null,o.a.createElement(l.a,null,o.a.createElement(s.d,null,o.a.createElement(s.b,{exact:!0,path:"/login"},o.a.createElement(O,null)),o.a.createElement(s.b,{path:"/me"},o.a.createElement(V,null)),o.a.createElement(s.b,{path:"/rooms/:room",children:o.a.createElement(K,null)}),o.a.createElement(s.b,{path:"/404"},o.a.createElement("h6",null,"This room does not exist yoo")),o.a.createElement(s.b,{path:"*"},o.a.createElement("h6",null,"This room does not exist yoo")))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},86:function(e,t,a){e.exports=a(107)},91:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.43dabbd2.chunk.js.map